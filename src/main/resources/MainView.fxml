<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>


<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.example.ui.MainController"
            styleClass="app-root">

    <!-- Top -->
    <top>
        <VBox spacing="8"
              styleClass="top-container">

            <ToolBar styleClass="top-bar">

                <Button fx:id="homeButton"
                        text="Home"
                        prefHeight="32"
                        onAction="#loadAllMoviesFromDb"
                        styleClass="nav-button"/>

                <Button fx:id="topRatedButton"
                        text="Top Rated"
                        prefHeight="32"
                        onAction="#loadTopRatedFromDatabase"
                        styleClass="nav-button"/>

                <Button fx:id="newReleasesButton"
                        text="New Releases"
                        prefHeight="32"
                        onAction="#loadNewReleases"
                        styleClass="nav-button"/>

                <TextField fx:id="searchField"
                           prefHeight="32"
                           promptText="Search movies..."
                           onAction="#searchRemote"
                           prefWidth="300"
                           styleClass="search-field"/>

                <Button text="Search"
                        onAction="#searchRemote"
                        prefHeight="32"
                        styleClass="nav-button"
                />

                <StackPane fx:id="loadingOverlay" visible="false" prefHeight="32">
                <ProgressIndicator />
                </StackPane>



                <Region HBox.hgrow="ALWAYS"/>

                <!-- FAVORITES BUTTON -->
                <Button fx:id="favoritesButton"
                        onAction="#showFavorites"
                        styleClass="icon-button">

                    <graphic>
                        <StackPane>
                            <ImageView fx:id="favoritesIcon"
                                       fitWidth="16"
                                       fitHeight="16"
                                       preserveRatio="true"/>

                            <Label fx:id="favoritesCountLabel"
                                   visible="false"
                                   StackPane.alignment="TOP_RIGHT"
                                   translateX="8"
                                   translateY="-8"
                                   styleClass="favorites-counter"/>
                        </StackPane>
                    </graphic>

                </Button>

                <Button fx:id="settingsButton"
                        onAction="#openSettings"
                        styleClass="icon-button">

                    <graphic>
                        <ImageView fx:id="settingsIcon"
                                   fitWidth="16"
                                   fitHeight="16"
                                   preserveRatio="true"/>
                    </graphic>

                </Button>

            </ToolBar>

            <!-- Filter Bar -->
            <HBox spacing="10"
                  alignment="CENTER_LEFT"
                  styleClass="filter-bar">

                <Label text="Genre:"/>

                <ComboBox fx:id="genreComboBox"
                          promptText="All genres"
                          onAction="#filterByGenre"/>
            </HBox>
        </VBox>
    </top>

    <!-- Movie Grid -->
    <center>
        <ScrollPane fx:id="scrollPane"
                    fitToWidth="true"
                    vbarPolicy="AS_NEEDED"
                    hbarPolicy="NEVER"
                    styleClass="main-scroll-pane">

            <content>
                <FlowPane fx:id="movieContainer"
                          hgap="15"
                          vgap="15"
                          prefWrapLength="1300"
                          alignment="TOP_LEFT"
                          styleClass="movie-container">

                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15"/>
                    </padding>

                </FlowPane>
            </content>
        </ScrollPane>
    </center>

</BorderPane>
